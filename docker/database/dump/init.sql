-- DATABASE
-- CREATE
-- DATABASE IF NOT EXISTS symfony_base CHARACTER SET utf8 COLLATE utf8_general_ci;
-- USER
-- DROP
-- USER dmitry;
-- FLUSH
-- PRIVILEGES;
--
-- CREATE
-- USER IF NOT EXISTS 'dmitry'@'localhost' IDENTIFIED WITH mysql_native_password BY 'root';
-- GRANT ALL
-- ON `symfony_base`.* TO 'dmitry'@'localhost' IDENTIFIED WITH mysql_native_password BY 'root';
-- FLUSH
-- PRIVILEGES;
--
-- TABLES
-- CREATE TABLE symfony_base.author
-- (
--     id   int auto_increment primary key,
--     name varchar(255) not null unique
-- );
--
-- CREATE TABLE symfony_base.book
-- (
--     id        int auto_increment primary key,
--     name      varchar(255) not null unique,
--     author_id int          not null references author (id),
--     lang      tinytext     not null,
--     FOREIGN KEY (author_id) REFERENCES author (id)
-- );
--
-- CREATE INDEX book_author_id_index
--     ON book (author_id);
--
-- CREATE
-- DATABASE IF NOT EXISTS symfony_base_test;
-- CREATE TABLE symfony_base_test.author (
--     id INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
--     name VARCHAR(255) NOT NULL UNIQUE KEY
-- );
-- CREATE TABLE symfony_base_test.book (
--     id INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
--     name VARCHAR(255) NOT NULL UNIQUE KEY,
--     lang VARCHAR(255) NOT NULL
-- );
-- CREATE TABLE symfony_base_test.book_author (
--     author_id INT NOT NULL,
--     book_id INT NOT NULL,
--     INDEX IDX_9478D345F675F31B (author_id),
--     INDEX IDX_9478D34516A2B381 (book_id),
--     PRIMARY KEY(book_id, author_id)
-- );
-- ALTER TABLE symfony_base_test.book_author ADD CONSTRAINT FK_9478D345F675F31B FOREIGN KEY (author_id) REFERENCES author (id) ON UPDATE RESTRICT ON DELETE RESTRICT;
-- ALTER TABLE symfony_base_test.book_author ADD CONSTRAINT FK_9478D34516A2B381 FOREIGN KEY (book_id) REFERENCES book (id) ON UPDATE RESTRICT ON DELETE RESTRICT;
